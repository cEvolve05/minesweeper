import { VerticalBox, Button } from "std-widgets.slint";
import { Isolator } from "@project/widget/isolator.slint";
import { View } from "@project/widget/view.slint";
import {
    Board,
    GridData,
    GridStatus,
    FaceButtonStatus,
} from "../widget/board.slint";

export global GameState {
    in-out property <int> number;
    callback set(new: int);
    in property <int> grid-width: 9;
    in property <int> grid-height: 9;
    in property <length> grid-size: 32px;
    in-out property <[GridData]> grid-data;
    callback clicked(x: int, y: int);
    callback pointer-event(x: int, y: int, event: PointerEvent);
    callback hover-changed(x: int, y: int, value: bool);
    callback pressed-changed(x: int, y: int, value: bool);
    in property <int> flag-counter;
    in property <int> time-in-second;
    in property <FaceButtonStatus> face-status;
    callback face_clicked();
}

export component Game inherits Board {
    grid-width <=> GameState.grid-width;
    grid-height <=> GameState.grid-height;
    grid-size <=> GameState.grid-size;
    grid-data <=> GameState.grid-data;
    flag-counter: GameState.flag-counter;
    time-in-second: GameState.time-in-second;
    face-status: GameState.face-status;
    clicked(x, y) => {
        GameState.clicked(x, y)
    }
    pointer-event(x, y, event) => {
        GameState.pointer-event(x, y, event)
    }
    hover-changed(x, y, value) => {
        GameState.hover-changed(x, y, value)
    }
    pressed-changed(x, y, value) => {
        GameState.pressed-changed(x, y, value)
    }
    face_clicked => GameState.face_clicked();
}
